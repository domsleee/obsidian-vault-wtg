
Let us break down what `TryGetJobConsolQuery` does.
* `TryGetJobConShipLinkQuery`
	* If all three of the shipment "OSMG Ignore" variables are true, it allows all consols to be visible in glow.
	* Otherwise, it is a condition based on the attached shipments of the consol, see below for details.
* `TryGetJobConsolWithRelatedAddressesQuery` uses [GetJobConsolsWithSecurityContext](https://github.com/WiseTechGlobal/CargoWise.Shared/blob/master/CargoWise.DbUpgrader/src/Scripts/Scripts.Definitions/Freight/Consol/GetJobConsolsWithSecurityContext.sql), which is a condition based on `JK_OA_UnpackDepotAddress`
* `TryGetJobConsolWithRelatedSupplierBooking` gets consols where any container has `JC_JSB_SupplierBooking` as non-null.

### `TryGetJobConShipLinkQuery` details

These are the three shipment types, and each have their own "IgnoreOSMG" filter:

| Variable                        | Path                                                                                                        |
| ------------------------------- | ----------------------------------------------------------------------------------------------------------- |
| isMaintainShipmentIgnoreOSMG    | Operate > Forwarding > Shipments > Permit Unconditional access regardless of Org. Security Groups           |
| isShipsAgencyIgnoreOSMG         | Operate > Liner & Agency > Bookings > Permit Unconditional access regardless of Org. Security Groups        |
| isAgencyDocumentationIgnoreOSMG | Operate > Liner & Agency > Bills of Lading > Permit Unconditional access regardless of Org. Security Groups |

If they are all true, it allows all consols.

Otherwise, it does a query on the consol shipments, it seems to check the shipment orgs against the orgs of the current user (`@StaffPK`)

[GetJobShipmentsWithStaffSecurityContext](https://github.com/WiseTechGlobal/CargoWise.Shared/blob/1abaac6f3357926b398a48590a502d2077b4c726/CargoWise.DbUpgrader/src/Scripts/Scripts.Definitions/Freight/Shipment/GetJobShipmentsWithStaffSecurityContext.sql)

## Consols

Looking in `TryGetJobConsolQuery`



### Missing
System > Registry > Edit Specific Settings > Freight > Consolidations > Allow access to consol regardless of shipments OSMG rights